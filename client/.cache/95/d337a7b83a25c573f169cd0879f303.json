{"id":"node_modules/lru-memoizer/lib/sync.js","dependencies":[{"name":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\package.json","includedInParent":true,"mtime":1648481643194},{"name":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\package.json","includedInParent":true,"mtime":1648481640877},{"name":"lru-cache","loc":{"line":26,"column":42,"index":916},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\sync.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\node_modules\\lru-cache\\lib\\lru-cache.js"},{"name":"events","loc":{"line":27,"column":23,"index":954},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\sync.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\events\\events.js"},{"name":"lodash.clonedeep","loc":{"line":28,"column":49,"index":1014},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\sync.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lodash.clonedeep\\index.js"},{"name":"./freeze","loc":{"line":29,"column":23,"index":1059},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\sync.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\freeze.js"}],"generated":{"js":"\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lru_cache_1 = __importDefault(require(\"lru-cache\"));\nvar events_1 = require(\"events\");\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar freeze_1 = require(\"./freeze\");\nfunction syncMemoizer(options) {\n    var cache = new lru_cache_1.default(options);\n    var load = options.load;\n    var hash = options.hash;\n    var bypass = options.bypass;\n    var itemMaxAge = options.itemMaxAge;\n    var freeze = options.freeze;\n    var clone = options.clone;\n    var emitter = new events_1.EventEmitter();\n    var defaultResult = Object.assign({\n        del: del,\n        reset: function () { return cache.reset(); },\n        keys: cache.keys.bind(cache),\n        on: emitter.on.bind(emitter),\n        once: emitter.once.bind(emitter)\n    }, options);\n    if (options.disable) {\n        return Object.assign(load, defaultResult);\n    }\n    function del() {\n        var key = hash.apply(void 0, __spread(arguments));\n        cache.del(key);\n    }\n    function emit(event) {\n        var parameters = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            parameters[_i - 1] = arguments[_i];\n        }\n        emitter.emit.apply(emitter, __spread([event], parameters));\n    }\n    function isPromise(result) {\n        // detect native, bluebird, A+ promises\n        return result && result.then && typeof result.then === 'function';\n    }\n    function processResult(result) {\n        var res = result;\n        if (clone) {\n            if (isPromise(res)) {\n                res = res.then(lodash_clonedeep_1.default);\n            }\n            else {\n                res = lodash_clonedeep_1.default(res);\n            }\n        }\n        if (freeze) {\n            if (isPromise(res)) {\n                res = res.then(freeze_1.deepFreeze);\n            }\n            else {\n                freeze_1.deepFreeze(res);\n            }\n        }\n        return res;\n    }\n    var result = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (bypass && bypass.apply(void 0, __spread(args))) {\n            emit.apply(void 0, __spread(['miss'], args));\n            return load.apply(void 0, __spread(args));\n        }\n        var key = hash.apply(void 0, __spread(args));\n        var fromCache = cache.get(key);\n        if (fromCache) {\n            emit.apply(void 0, __spread(['hit'], args));\n            return processResult(fromCache);\n        }\n        emit.apply(void 0, __spread(['miss'], args));\n        var result = load.apply(void 0, __spread(args));\n        if (itemMaxAge) {\n            // @ts-ignore\n            cache.set(key, result, itemMaxAge.apply(void 0, __spread(args.concat([result]))));\n        }\n        else {\n            cache.set(key, result);\n        }\n        return processResult(result);\n    };\n    return Object.assign(result, defaultResult);\n}\nexports.syncMemoizer = syncMemoizer;\n"},"sourceMaps":{"js":{"version":3,"file":"sync.js","sourceRoot":"","sources":["../src/sync.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"3f926eada4c87287c1d3337b2857c495","cacheData":{"env":{}}}