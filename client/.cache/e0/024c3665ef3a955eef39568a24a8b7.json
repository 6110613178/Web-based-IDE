{"id":"node_modules/lru-memoizer/lib/async.js","dependencies":[{"name":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\package.json","includedInParent":true,"mtime":1648481643194},{"name":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\package.json","includedInParent":true,"mtime":1648481640877},{"name":"lru-cache","loc":{"line":36,"column":42,"index":1235},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\async.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\node_modules\\lru-cache\\lib\\lru-cache.js"},{"name":"events","loc":{"line":37,"column":23,"index":1273},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\async.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\events\\events.js"},{"name":"lodash.clonedeep","loc":{"line":38,"column":49,"index":1333},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\async.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lodash.clonedeep\\index.js"},{"name":"./freeze","loc":{"line":39,"column":23,"index":1378},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\async.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\freeze.js"},{"name":"./sync","loc":{"line":40,"column":21,"index":1412},"parent":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\async.js","resolved":"C:\\Users\\Teerat Prasitwet\\Desktop\\Web-based IDE Project\\client\\node_modules\\lru-memoizer\\lib\\sync.js"}],"generated":{"js":"\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lru_cache_1 = __importDefault(require(\"lru-cache\"));\nvar events_1 = require(\"events\");\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar freeze_1 = require(\"./freeze\");\nvar sync_1 = require(\"./sync\");\nfunction asyncMemoizer(options) {\n    var cache = new lru_cache_1.default(options);\n    var load = options.load;\n    var hash = options.hash;\n    var bypass = options.bypass;\n    var itemMaxAge = options.itemMaxAge;\n    var freeze = options.freeze;\n    var clone = options.clone;\n    var queueMaxAge = options.queueMaxAge || 1000;\n    var loading = new Map();\n    var emitter = new events_1.EventEmitter();\n    var memoizerMethods = Object.assign({\n        del: del,\n        reset: function () { return cache.reset(); },\n        keys: cache.keys.bind(cache),\n        on: emitter.on.bind(emitter),\n        once: emitter.once.bind(emitter)\n    }, options);\n    if (options.disable) {\n        return Object.assign(load, memoizerMethods);\n    }\n    function del() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var key = hash.apply(void 0, __spread(args));\n        cache.del(key);\n    }\n    function add(key, parameters, result) {\n        if (freeze) {\n            result.forEach(freeze_1.deepFreeze);\n        }\n        if (itemMaxAge) {\n            cache.set(key, result, itemMaxAge.apply(void 0, __spread(parameters.concat(result))));\n        }\n        else {\n            cache.set(key, result);\n        }\n    }\n    function runCallbacks(callbacks, args) {\n        var e_1, _a;\n        try {\n            for (var callbacks_1 = __values(callbacks), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\n                var callback = callbacks_1_1.value;\n                // Simulate async call when returning from cache\n                // and yield between callback resolution\n                if (clone) {\n                    setImmediate.apply(void 0, __spread([callback], args.map(lodash_clonedeep_1.default)));\n                }\n                else {\n                    setImmediate.apply(void 0, __spread([callback], args));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (callbacks_1_1 && !callbacks_1_1.done && (_a = callbacks_1.return)) _a.call(callbacks_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    function emit(event) {\n        var parameters = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            parameters[_i - 1] = arguments[_i];\n        }\n        emitter.emit.apply(emitter, __spread([event], parameters));\n    }\n    function memoizedFunction() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var parameters = args.slice(0, -1);\n        var callback = args.slice(-1).pop();\n        var key;\n        if (bypass && bypass.apply(void 0, __spread(parameters))) {\n            emit.apply(void 0, __spread(['miss'], parameters));\n            return load.apply(void 0, __spread(args));\n        }\n        if (parameters.length === 0 && !hash) {\n            //the load function only receives callback.\n            key = '_';\n        }\n        else {\n            key = hash.apply(void 0, __spread(parameters));\n        }\n        var fromCache = cache.get(key);\n        if (fromCache) {\n            emit.apply(void 0, __spread(['hit'], parameters));\n            // found, invoke callback\n            return runCallbacks([callback], [null].concat(fromCache));\n        }\n        var pendingLoad = loading.get(key);\n        if (pendingLoad && pendingLoad.expiresAt > Date.now()) {\n            // request already in progress, queue and return\n            pendingLoad.queue.push(callback);\n            emit.apply(void 0, __spread(['queue'], parameters));\n            return;\n        }\n        emit.apply(void 0, __spread(['miss'], parameters));\n        var started = Date.now();\n        // no pending request or not resolved before expiration\n        // create a new queue and invoke load\n        var queue = [callback];\n        loading.set(key, {\n            queue: queue,\n            expiresAt: started + queueMaxAge\n        });\n        var loadHandler = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var err = args[0];\n            if (!err) {\n                add(key, parameters, args.slice(1));\n            }\n            // this can potentially delete a different queue than `queue` if\n            // this callback was called after expiration.\n            // that will only cause a new call to be performed and a new queue to be\n            // created\n            loading.delete(key);\n            emit.apply(void 0, __spread(['loaded', Date.now() - started], parameters));\n            runCallbacks(queue, args);\n        };\n        load.apply(void 0, __spread(parameters, [loadHandler]));\n    }\n    ;\n    return Object.assign(memoizedFunction, memoizerMethods);\n}\nexports.asyncMemoizer = asyncMemoizer;\nasyncMemoizer.sync = sync_1.syncMemoizer;\n"},"sourceMaps":{"js":{"version":3,"file":"async.js","sourceRoot":"","sources":["../src/async.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"0996d794ec99b19b1e9f57eec2d05eb4","cacheData":{"env":{}}}